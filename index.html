<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pixkey</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #181818;
      color: #f7f7f7;
			font-weight: bold;
			text-align: center;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: row;
			justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .main-container {
      display: flex;
      flex-direction: row;
			justify-content: center;
      align-items: center;
      gap: 30px;
    }
    h2 {
      text-align: center;
      position: absolute;
      top: 20px;
      left: 20px;
      color: #FFD500;
    }
    .toolbar {
			height: 100vh;
      display: flex;
			position: absolute;
			left: 0;
			justify-content: center;
      flex-direction: column;
      gap: 12px;
      background-color: #333;
      padding: 15px;
      border-radius: 0;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
      overflow-y: hidden;
    }
    .toolbar button,
    .toolbar input[type="color"],
    .toolbar input[type="checkbox"] {
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      border: none;
      transition: background-color 0.2s ease;
      font-weight: bold;
    }
    .toolbar button:hover,
    .toolbar input[type="color"]:hover,
    .toolbar input[type="checkbox"]:hover {
      background-color: #ffea5f;
  		color: white;
    }
    .toolbar button {
      background-color: #FFD500;
      color: #333;
    }
		.toolbar button.selected {
			box-shadow: 0 0 10px 2px #FFDA24;
			background-color: #FFDA24;
			color: white;
		}
    .toolbar input[type="color"] {
      width: 40px;
      height: 40px;
      border: 1px solid #ccc;
      padding: 0;
      appearance: none;
      background: #FFD500;
      cursor: pointer;
    }
    .toolbar input[type="checkbox"] {
      transform: scale(1.2);
    }

		.canvas-wrapper {
  		overflow: hidden;
  		position: relative;
		}

    canvas {
      border-radius: 8px;
      background: rgba(0, 0, 0, 0);
      border: 2px solid #444;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.5);
      image-rendering: pixelated;
      cursor: crosshair;
    }
		
    .grid {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-size: 16px 16px;
      background-image: linear-gradient(to right, #444 1px, transparent 1px),
                        linear-gradient(to bottom, #444 1px, transparent 1px);
      border-radius: 8px;
    }
    .toolbar input[type="color"]:focus {
      outline: none;
      box-shadow: 0px 0px 5px rgba(76, 175, 80, 0.8);
    }


		
		.timeline-panel {
  		display: flex;
			position: absolute;
			right: 0px;
  		flex-direction: column;
  		background-color: #333;
  		padding: 15px;
  		border-radius: 0;
			justify-content: center;
			gap: 12px;
  		height: 100vh;
  		overflow: hidden;
		}


		.timeline-panel button {
  		padding: 8px 16px;
  		font-size: 14px;
  		cursor: pointer;
 			border: none;
  		background-color: #FFD500;
  		color: #333;
 			font-weight: bold;
  		transition: background-color 0.2s ease;
		}

		.timeline-panel button:hover {
  		background-color: #ffea5f;
  		color: white;
		}

		#frameIndicator {
  		text-align: center;
  		font-weight: bold;
 		 	color: #FFD500;
  		padding: 4px 0;
		}

		.frame-list {
			flex: 1;
  		overflow-y: auto;
  		background-color: #222;
  		border: 1px solid #444;
  		border-radius: 5px;
  		padding: 5px;
  		display: flex;
  		flex-direction: column;
  		gap: 6px;
			max-height: 50vh;
		}


		.frame-item {
  		padding: 6px 12px;
  		background-color: #FFD500;
  		color: #333;
  		font-weight: bold;
  		cursor: pointer;
  		text-align: center;
  		transition: background-color 0.2s ease;
		}

		.frame-item.active {
  		background-color: #ffa500;
		}

		.frame-item:hover {
  		background-color: #ffea5f;
		}

		/* Side Buttons Left */
		.side-buttons {
  		position: absolute;
  		left: 13%; /* Adjust as needed */
  		top: 10%;
  		transform: translateY(-50%);
  		display: flex;
  		flex-direction: column;
  		gap: 12px;
  		background-color: transparent;
		}

		.side-buttons button {
			background-color: #636363;
  		color: white;
  		border: none;
  		padding: 10px;
  		font-size: 18px;
  		cursor: pointer;
  		transition: background-color 0.2s ease;
		}

		.side-buttons button:hover {
  		background-color: #828282;
		}


  </style>

	<link rel="icon" href="Assets/Pixkey-icon.png" type="image/png" sizes="64x64">
</head>
<body>
  <div class="main-container">
		<div class="canvas-wrapper">
			<canvas id="referenceCanvas" width="512" height="512" style="position: absolute; top: 2px; left: 2px; z-index: -1; pointer-events: none; border-radius: 8px; image-rendering: pixelated; background: rgba(0, 0, 0, 0);"></canvas>
			<div class="grid" id="grid"></div>
			<canvas id="canvas" width="512" height="512"></canvas>
		</div>

		
		<div class="toolbar">
			<button onclick="setTool('pen')">Pen</button>
			<button onclick="setTool('eraser')">Eraser</button>
			<button onclick="setTool('rect')">Rectangle</button>
			<button onclick="setTool('circle')">Circle</button>
			<button onclick="setTool('fill')">Fill</button>
			
			<label><input type="checkbox" id="fillToggle" checked /> Fill Shapes</label>
			<input type="color" id="colorPicker" value="#FFD500" />
			<label for="brushSize" style="margin-top:10px;">Brush Size</label>
			<input type="range" id="brushSize" min="1" max="8" value="1" title="Brush Size"/>
			
			<div style="display: inline-block;">
				<button onclick="undo()">‚Ü©</button>
				<button onclick="redo()">‚Ü™</button>
			</div>
			
			<input type="file" id="loadReference" accept="image/*" style="display:none;" />
			<button id="referenceButton" onclick="document.getElementById('loadReference').click()">üñºÔ∏è Load Refer</button>
			
      <button onclick="saveImage()">üíæ Save</button>
      <input type="file" id="loadImage" accept="image/*" style="display:none" />
      <button onclick="document.getElementById('loadImage').click()">üìÇ Load</button>
    </div>
	</div>

	<div class="timeline-panel">
		<label for="refOpacity" style="margin-top:10px;">Reference Opacity</label>
		<input type="range" id="refOpacity" min="0" max="1" step="0.1" value="0.5" />

		
		<div style="display: inline-block;">
			<button onclick="addFrame()" title="New Frame">‚ûï</button>
			<button onclick="deleteFrame()" title="Delete Frame">üóëÔ∏è</button>
		</div>
		
		<button onclick="playAnimation()">‚ñ∂Ô∏è Play</button>
    	<button onclick="exportSpriteSheet()">üñºÔ∏è Export Sheet</button>
    	<div id="frameList" class="frame-list"></div>
	</div>

	<div class="side-buttons">
		<button onclick="toggleGrid()" title="Toggle Grid">üî≥</button>
		<button onclick="clearCanvas()" title="Clear Canvas">üßπ</button>
	</div>


	<script src="Libset/draw.js"></script>
	<script src="Libset/Styler.js"></script>
	<script src="Libset/input.js"></script>
	<script src="Libset/anim.js"></script>
</body>
</html>